<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Anton Semjonov">
  <link rel="shortcut icon" href="../assets/planet.png">
  
  <title>FreeIPA - ansemjo's docs</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "FreeIPA";
    var mkdocs_page_input_path = "tips/freeipa.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> ansemjo's docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../index.html">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../software.html">Software</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Personal</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../personal/löschungsantrag.html">DSGVO Löschungsantrag</a>
                </li>
                <li class="">
                    
    <a class="" href="../personal/versicherungen.html">Versicherungen</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Rechenzentrum</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../rechenzentrum/index.html">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../rechenzentrum/bootstrap.html">Bootstrap</a>
                </li>
                <li class="">
                    
    <a class="" href="../rechenzentrum/docker-in-kvm.html">Docker in QEMU/KVM</a>
                </li>
                <li class="">
                    
    <a class="" href="../rechenzentrum/flynn.html">Flynn</a>
                </li>
                <li class="">
                    
    <a class="" href="../rechenzentrum/kvm-on-alpine.html">KVM on Alpine</a>
                </li>
                <li class="">
                    
    <a class="" href="../rechenzentrum/netboot.html">Network Boot</a>
                </li>
                <li class="">
                    
    <a class="" href="../rechenzentrum/tls-host-aliases.html">TLS for Host Aliases</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Security</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../security/net-disk-decryption.html">Network Disk Decryption</a>
                </li>
                <li class="">
                    
    <a class="" href="../security/secureboot.html">Secureboot</a>
                </li>
                <li class="">
                    
    <a class="" href="../security/systemd-decryption-target.html">Systemd Disk Decryption Target</a>
                </li>
                <li class="">
                    
    <a class="" href="../security/zfs-in-place-encryption.html">ZFS in-place Encryption</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tips</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="ansible.html">Ansible</a>
                </li>
                <li class="">
                    
    <a class="" href="backblaze.html">Backblaze</a>
                </li>
                <li class="">
                    
    <a class="" href="bash.html">Bash</a>
                </li>
                <li class="">
                    
    <a class="" href="centos.html">CentOS</a>
                </li>
                <li class="">
                    
    <a class="" href="containers.html">Containers</a>
                </li>
                <li class="">
                    
    <a class="" href="coreos.html">CoreOS</a>
                </li>
                <li class="">
                    
    <a class="" href="documentscan.html">Document Scanning</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="freeipa.html">FreeIPA</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#freeipa">FreeIPA</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#request-certificates-manually">Request Certificates Manually</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="git.html">Git</a>
                </li>
                <li class="">
                    
    <a class="" href="gitlab.html">Gitlab</a>
                </li>
                <li class="">
                    
    <a class="" href="golang.html">Go</a>
                </li>
                <li class="">
                    
    <a class="" href="lenovo.html">Lenovo</a>
                </li>
                <li class="">
                    
    <a class="" href="openwrt.html">OpenWRT</a>
                </li>
                <li class="">
                    
    <a class="" href="python.html">Python</a>
                </li>
                <li class="">
                    
    <a class="" href="restic.html">Restic</a>
                </li>
                <li class="">
                    
    <a class="" href="serialdevices.html">Serial</a>
                </li>
                <li class="">
                    
    <a class="" href="tor.html">Tor</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">ansemjo's docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
      
        
          <li>Tips &raquo;</li>
        
      
    
    <li>FreeIPA</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/ansemjo/wiki/edit/master/docs/tips/freeipa.md"> Edit on ansemjo/wiki</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="freeipa">FreeIPA<a class="headerlink" href="#freeipa" title="Permanent link">&para;</a></h1>
<h3 id="request-certificates-manually">Request Certificates Manually<a class="headerlink" href="#request-certificates-manually" title="Permanent link">&para;</a></h3>
<p>You can request TLS certificates manually for hosts that are not fully enrolled in the domain or don&rsquo;t have any
FreeIPA tools installed at all (CoreOS hosts, for example). This requires however, that you either are an admin
in the domain or at least have the rights to create new hosts and service principals.</p>
<p>First of all, create a signing request on the host:</p>
<pre class="codehilite"><code>openssl req -nodes -new -newkey rsa:2048 -sha256 \
  -out test.csr -keyout test.key \
  -subj '/CN=test.example.com/'</code></pre>


<p>Now switch to a machine with the FreeIPA tools installed and add a host entry. You&rsquo;ll want to do this anyway to
properly be able to set DNS records for your host.</p>
<pre class="codehilite"><code>kinit admin
ipa host-add test.example.com --ip-address 192.168.1.100</code></pre>


<p>Now transfer the CSR to this machine and sign the request while simulateneously adding the <code>HTTP/</code> service principal:</p>
<pre class="codehilite"><code>ipa cert-request test.csr \
  --principal HTTP/test.example.com --add \
  --certificate-out test.crt</code></pre>


<p>This command will display the serial number, which can later be used to fetch information about the certificate or
revoke it. Finally, just copy the <code>test.crt</code> back to your host and configure whatever service you want to secure with
TLS.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="git.html" class="btn btn-neutral float-right" title="Git">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="documentscan.html" class="btn btn-neutral" title="Document Scanning"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright (c) 2019 Anton Semjonov.
Licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/" title="Creative Commons Attribution-ShareAlike 4.0">CC-BY-SA-4.0</a> license.
</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="documentscan.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="git.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
